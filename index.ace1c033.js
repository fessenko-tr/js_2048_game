function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r(r){return function(e){if(Array.isArray(e))return t(e)}(r)||e(r)||n(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}}var o={startBtn:document.querySelector(".start"),fieldCells:document.querySelectorAll(".field-cell"),fieldRows:document.querySelectorAll(".field-row"),messageStart:document.querySelector(".message-start"),messageLose:document.querySelector(".message-lose"),messageWin:document.querySelector(".message-win"),score:document.querySelector(".game-score")},i=function(t){var i,c,d,m,h,v,y;i=t.key,(c=o.startBtn).classList.remove("start"),c.classList.add("restart"),c.textContent="Restart",d=o.fieldCells,m=o.fieldRows,v=(h="ArrowLeft"===i||"ArrowRight"===i?r(m):function(t){for(var r=((function(t){if(Array.isArray(t))return t})(t)||e(t)||n(t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0),o=r.length/4,i=[],a=0;a<4;a++){for(var s=[],c=0;c<o;c++){var l=4*c+a;s.push(r[l])}i.push({children:s})}return i}(d)).map(function(t){return r(t.children).map(function(t){return t.textContent})}).flat(),h.forEach(function(t){var e=("ArrowLeft"===i||"ArrowUp"===i?r(t.children):r(t.children).reverse()).filter(function(t){return""!==t.textContent}).map(function(t){return t.textContent});e.forEach(function(t,r){if(void 0!==e[r-1]&&e[r-1]===e[r]){var n,i,a;n=+e[r]+ +e[r-1],a=+(i=o.score).textContent,i.textContent=a+n,e[r-1]=+e[r]+ +e[r-1],e.splice(r,1)}});var n="ArrowLeft"===i||"ArrowUp"===i?r(e).concat(["","","",""]).slice(0,4):r(e).concat(["","","",""]).slice(0,4).reverse();r(t.children).forEach(function(t,e){var r=n[e];t.textContent=r,t.classList[1]&&t.classList.remove(t.classList[1]),2048==+r&&f(o.messageWin),r&&t.classList.add("field-cell--".concat(r))})}),y=h.map(function(t){return r(t.children).map(function(t){return t.textContent})}).flat(),JSON.stringify(v)===JSON.stringify(y)||u(a(),s()),l()||function(){for(var t=o.fieldRows,e=0;e<t.length;e++)for(var r=0;r<t[e].children.length;r++){var n=t[e].children[r];if(t[e].children[r+1]&&n.textContent===t[e].children[r+1].textContent||t[e+1]&&n.textContent===t[e+1].children[r].textContent)return!0}return!1}()||f(o.messageLose)};function a(){if(!l())return -1;for(var t=c(15);""!==o.fieldCells[t].textContent;)t=c(15);return t}function s(){return 10>=c(100)?4:2}function c(t){return Math.floor(Math.random()*(t+1))}function l(){return r(o.fieldCells).some(function(t){return""===t.textContent})}function u(t,e){if(-1!==t){var r=o.fieldCells;r[t].classList.add("field-cell--".concat(e)),r[t].textContent=e}}function f(t){t.classList.remove("hidden"),window.removeEventListener("keydown",i)}o.startBtn.addEventListener("click",function(){var t,e,r,n,c;t=o.messageStart,e=o.messageLose,r=o.messageWin,n=o.score,c=o.fieldCells,n.textContent="0",[t,e,r].forEach(function(t){return t.classList.add("hidden")}),c.forEach(function(t){t.classList.remove(t.classList[1]),t.textContent=""}),u(a(),s()),u(a(),s()),window.addEventListener("keydown",i)});
//# sourceMappingURL=index.ace1c033.js.map
